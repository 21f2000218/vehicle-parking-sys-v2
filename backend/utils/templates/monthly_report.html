<!DOCTYPE html>
<html>
<head>
    <title>Monthly Parking Report</title>
</head>
<body>
    <h2>Monthly Parking Activity Report</h2>
    <p>User: {{ user.username }}</p>
    <p>Period: {{ start.strftime('%Y-%m-%d') }} to {{ end.strftime('%Y-%m-%d') }}</p>
    <ul>
        <li>Total Bookings: {{ total_bookings }}</li>
        <li>Total Spent: â‚¹{{ total_spent }}</li>
        <li>Most Used Lot: {{ most_used_lot or "N/A" }}</li>
    </ul>
    <h3>Reservations:</h3>
    <table border="1">
        <tr>
            <th>Date</th>
            <th>Lot</th>
            <th>Spot</th>
            <th>Cost</th>
            <th>Status</th>
        </tr>
        {% for r in reservations %}
        <tr>
            <td>{{ r.parking_in_time.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ r.spot.lot.prime_location_name }}</td>
            <td>{{ r.spot.id }}</td>
            <td>{{ r.total_cost or 0 }}</td>
            <td>{{ r.status.value }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>